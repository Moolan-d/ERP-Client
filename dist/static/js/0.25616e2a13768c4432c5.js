webpackJsonp([0],{477:function(t,e,a){a(490);var i=a(0)(a(485),a(494),"data-v-15c547e6",null);t.exports=i.exports},478:function(t,e,a){t.exports={default:a(479),__esModule:!0}},479:function(t,e,a){a(481),t.exports=a(4).Object.values},480:function(t,e,a){var i=a(27),o=a(22),r=a(39).f;t.exports=function(t){return function(e){for(var a,l=o(e),n=i(l),s=n.length,d=0,u=[];s>d;)r.call(l,a=n[d++])&&u.push(t?[a,l[a]]:l[a]);return u}}},481:function(t,e,a){var i=a(13),o=a(480)(!1);i(i.S,"Object",{values:function(t){return o(t)}})},485:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(478),o=a.n(i),r=a(141),l=a.n(r),n=a(14),s=a.n(n);a(2);e.default={data:function(){return{ruleForm2:{brand:"",id:""},dialogVisible:!1,fullscreenLoading:!1,labewidth:"80px",rules2:{brand:[{required:!0,validator:function(t,e,a){if(!e)return a(new Error("品牌名称不能为空"));setTimeout(function(){a()},10)},trigger:"blur"}],website:[{required:!0,validator:function(t,e,a){if(!e)return a(new Error("官网地址不能为空"));setTimeout(function(){a()},10)},trigger:"blur"}],slogan:[{required:!0,validator:function(t,e,a){if(!e)return a(new Error("Slogan不能为空"));setTimeout(function(){a()},10)},trigger:"blur"}],targetA:[{required:!0,validator:function(t,e,a){if(!e)return a(new Error("目标客户不能为空"));setTimeout(function(){a()},10)},trigger:"blur"}],position:[{required:!0,validator:function(t,e,a){if(!e)return a(new Error("市场定位不能为空"));setTimeout(function(){a()},10)},trigger:"blur"}],characteristic:[{required:!0,validator:function(t,e,a){if(!e)return a(new Error("产品特征不能为空"));setTimeout(function(){a()},10)},trigger:"blur"}]},additional:[],upload:{fileList:[],dialogImageUrl:"",imgdialogVisible:!1,imgUrl:[],form:{website:"",slogan:"",position:"",targetA:"",characteristic:"",competitor:""},onlineImg:[],imgList:{logo:[],attorney:[],brandStory:[],brandHonor:[],abroad:[]}}}},created:function(){this.load()},methods:{load:function(){var t=this;if(this.$store.state.toUpdateBrand){var e=this.$store.state.toUpdateBrand;this.ruleForm2.brand=e.name,this.ruleForm2.id=e.id;var a=JSON.parse(e.additional);this.additional=e.additional,this.imgLogic(a),this.textLogic(a)}else{var i=window.location.hash,o=i.match(/\?id=(\d+)/)[1];this.$store.dispatch("getBrand",{brandId:o}).then(function(e){var a=e.brand;t.ruleForm2.brand=a.name,t.ruleForm2.id=a.id;var i=JSON.parse(a.additional);t.additional=a.additional,t.imgLogic(i),t.textLogic(i)})}},createBrand:function(t,e){var a=this,i=this.objToArr(this.upload.form),o=this.formatObj(this.upload.imgUrl);this.additional=JSON.parse(this.additional);var r=this.additional.filter(function(t){return"img"==t.type});o=o.concat(r);var l=[];l=l.concat(i,o),console.log(l),l=s()(l),l=l.replace(/"/g,'\\"'),this.$refs[t].validate(function(t){var i=a;if(!t)return console.log("error submit!!"),!1;var o=e;o.additional=l,console.log(o),a.$store.dispatch("updateBrand",{newbrand:o}).then(function(t){console.log(t),i.$message({message:"订单创建成功",type:"success"})}).then(location.href="#/home/center/brand")})},resetForm:function(t){this.$refs[t].resetFields()},handleCurrentChange:function(t){this.currentRow=t,this.store.dispatch("")},openFullScreen:function(){var t=this;this.fullscreenLoading=!0,setTimeout(function(){t.fullscreenLoading=!1},3e3)},handleRemove:function(t,e){console.log(t,e)},handlePreview:function(t){console.log(t)},handlePictureCardPreview:function(t){this.upload.dialogImageUrl=t.url,this.upload.imgdialogVisible=!0},attorney:function(t){this.pushTheFiles(t,"attorney")},logo:function(t){this.pushTheFiles(t,"logo")},brandStory:function(t){this.pushTheFiles(t,"story")},brandHonor:function(t){this.pushTheFiles(t,"honor")},abroad:function(t){this.pushTheFiles(t,"abroadSail")},pushTheFiles:function(t,e){var a=t.response;a&&(a.fileName=e,this.upload.imgUrl.push(a))},objToArr:function(t){var e=[];for(var a in t){var i={};t[a]=t[a].replace(/\s+/g,""),i[""+a]=t[a],i.type="text",e.push(i)}return e},formatObj:function(t){t.forEach(function(t){t.object=t.data.upload[0]});for(var e=[],a=0;a<t.length;a++)e[a]={},e[a].object=t[a].object,e[a].fileName=t[a].fileName,e[a].type="img";return e},submit:function(){var t=this.objToArr(this.upload.form),e=this.formatObj(this.upload.imgUrl),a=[];a=a.concat(t,e)},textLogic:function(t){for(var e=t.filter(function(t){return"text"==t.type}),a=e.map(function(t){return l()(t)[0]}),i=e.map(function(t){return o()(t)[0]}),r=0;r<a.length;r++)this.upload.form[""+a[r]]=i[r]},imgLogic:function(t){var e=this,a=t.filter(function(t){return"img"==t.type});this.upload.onlineImg=a;for(var i=0;i<a.length;i++)"attorney"===a[i].fileName?this.upload.imgList.attorney.push(a[i]):"logo"===a[i].fileName?this.upload.imgList.logo.push(a[i]):"story"===a[i].fileName?this.upload.imgList.brandStory.push(a[i]):"honor"===a[i].fileName?this.upload.imgList.brandHonor.push(a[i]):this.upload.imgList.abroad.push(a[i]);var o=this.upload.imgList;for(var r in o){var l=o[r].map(function(t){return t.object});this.upload.imgList[r]=l;for(var n=0;n<l.length;n++)!function(t){var a=l[t];e.$store.dispatch("urlAuthorization",{uriObject:a}).then(function(t){a.url=t.urlAuthorization.uri})}(n)}}}}},486:function(t,e,a){e=t.exports=a(472)(),e.push([t.i,".branwrap[data-v-15c547e6]{position:relative;width:100%;margin-bottom:100px}.submit[data-v-15c547e6]{float:right;margin-right:100px;margin-bottom:200px}.tias[data-v-15c547e6]{position:absolute;right:0;top:100px}.settings[data-v-15c547e6]{margin-bottom:20px;border-bottom:1px dotted #ccc;width:95%;padding:10px}","",{version:3,sources:["/Users/eytan/Desktop/project/hulk-erp-client/src/components/statistics/upload.vue"],names:[],mappings:"AACA,2BACK,kBAAmB,AACnB,WAAY,AACZ,mBAAoB,CACxB,AACD,yBACC,YAAa,AACX,mBAAoB,AACnB,mBAAoB,CACvB,AACD,uBACI,kBAAmB,AACnB,QAAS,AACT,SAAU,CACb,AACD,2BAEI,mBAAmB,AAClB,8BAA8B,AAC9B,UAAW,AACX,YAAc,CAClB",file:"upload.vue",sourcesContent:["\n.branwrap[data-v-15c547e6]{\n     position: relative;\n     width: 100%;\n     margin-bottom: 100px\n}\n.submit[data-v-15c547e6]{\n float: right;\n   margin-right: 100px;\n    margin-bottom: 200px\n}\n.tias[data-v-15c547e6]{\n    position: absolute;\n    right: 0;\n    top: 100px\n}\n.settings[data-v-15c547e6]{\n\n    margin-bottom:20px;\n     border-bottom:1px dotted #ccc;\n     width: 95%;\n     padding: 10px;\n}\n"],sourceRoot:""}])},490:function(t,e,a){var i=a(486);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(473)("4efd8652",i,!0)},494:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"branwrap"},[a("div",{staticClass:"tabs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("基础配置")]),t._v(" "),a("el-breadcrumb-item",[t._v("品牌管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("创建品牌")])],1)],1),t._v(" "),a("el-tag",{staticStyle:{"margin-bottom":"20px"}},[t._v("品牌名")]),t._v(" "),a("el-form",{ref:"ruleForm2",staticClass:"settings",attrs:{model:t.ruleForm2,rules:t.rules2}},[a("el-row",[a("el-form-item",{attrs:{label:"品牌名称",prop:"brand","label-width":t.labewidth}},[a("el-input",{staticStyle:{width:"70%"},model:{value:t.ruleForm2.brand,callback:function(e){t.ruleForm2.brand=e},expression:"ruleForm2.brand"}})],1)],1)],1),t._v(" "),a("el-form",{ref:"upload.form",attrs:{model:t.upload.form,rules:t.rules2}},[a("el-tag",{staticStyle:{"margin-bottom":"20px"}},[t._v("配置项")]),t._v(" "),a("el-form-item",{staticClass:"settings",attrs:{"label-width":t.labewidth,label:"品牌口号",prop:"slogan"}},[a("el-input",{staticStyle:{width:"70%"},model:{value:t.upload.form.slogan,callback:function(e){t.upload.form.slogan=e},expression:"upload.form.slogan"}})],1),t._v(" "),a("el-form-item",{staticClass:"settings",attrs:{"label-width":t.labewidth,label:"官方网站",prop:"website"}},[a("el-input",{staticStyle:{width:"70%"},model:{value:t.upload.form.website,callback:function(e){t.upload.form.website=e},expression:"upload.form.website"}})],1),t._v(" "),a("el-form-item",{staticClass:"settings",attrs:{"label-width":t.labewidth,label:"目标客户",prop:"targetA"}},[a("el-input",{staticStyle:{width:"70%"},attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.upload.form.targetA,callback:function(e){t.upload.form.targetA=e},expression:"upload.form.targetA"}})],1),t._v(" "),a("el-form-item",{staticClass:"settings",attrs:{"label-width":t.labewidth,label:"市场定位",prop:"position"}},[a("el-input",{staticStyle:{width:"70%"},attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.upload.form.position,callback:function(e){t.upload.form.position=e},expression:"upload.form.position"}})],1),t._v(" "),a("el-form-item",{staticClass:"settings",attrs:{"label-width":t.labewidth,label:"产品特征",prop:"characteristic"}},[a("el-input",{staticStyle:{width:"70%"},attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.upload.form.characteristic,callback:function(e){t.upload.form.characteristic=e},expression:"upload.form.characteristic"}})],1),t._v(" "),a("el-form-item",{staticClass:"settings",attrs:{"label-width":t.labewidth,label:"竞争对手",prop:"competitor"}},[a("el-input",{staticStyle:{width:"70%"},attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.upload.form.competitor,callback:function(e){t.upload.form.competitor=e},expression:"upload.form.competitor"}})],1)],1),t._v(" "),[a("el-row",{staticClass:"settings",attrs:{span:20}},[a("el-col",{attrs:{span:3}},[t._v("授权书")]),t._v(" "),a("el-col",{attrs:{span:16}},[a("el-upload",{attrs:{action:"http://localhost:8000/graphql?query=mutation%7B%0A%20%20upload%7B%0A%20%20%20%20fieldname%2C%0A%20%20%20%20object%0A%20%20%7D%0A%7D%0A","list-type":"picture-card","on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove,"file-list":t.upload.imgList.attorney,"on-change":t.attorney}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{size:"tiny"},model:{value:t.upload.imgdialogVisible,callback:function(e){t.upload.imgdialogVisible=e},expression:"upload.imgdialogVisible"}},[a("img",{attrs:{width:"100%",src:t.upload.dialogImageUrl,alt:""}})])],1)],1),t._v(" "),a("el-row",{staticClass:"settings",attrs:{span:20}},[a("el-col",{attrs:{span:3}},[t._v("LOGO")]),t._v(" "),a("el-col",{attrs:{span:16}},[a("el-upload",{attrs:{action:"http://localhost:8000/graphql?query=mutation%7B%0A%20%20upload%7B%0A%20%20%20%20fieldname%2C%0A%20%20%20%20object%0A%20%20%7D%0A%7D%0A","list-type":"picture-card","on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove,"file-list":t.upload.imgList.logo,"on-change":t.logo}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{size:"tiny"},model:{value:t.upload.imgdialogVisible,callback:function(e){t.upload.imgdialogVisible=e},expression:"upload.imgdialogVisible"}},[a("img",{attrs:{width:"100%",src:t.upload.dialogImageUrl,alt:""}})])],1)],1),t._v(" "),a("el-row",{staticClass:"settings",attrs:{span:20}},[a("el-col",{attrs:{span:3}},[t._v("品牌故事")]),t._v(" "),a("el-col",{attrs:{span:16}},[a("el-upload",{attrs:{action:"http://localhost:8000/graphql?query=mutation%7B%0A%20%20upload%7B%0A%20%20%20%20fieldname%2C%0A%20%20%20%20object%0A%20%20%7D%0A%7D%0A","list-type":"picture-card","on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove,"file-list":t.upload.imgList.brandStory,"on-change":t.brandStory}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{size:"tiny"},model:{value:t.upload.imgdialogVisible,callback:function(e){t.upload.imgdialogVisible=e},expression:"upload.imgdialogVisible"}},[a("img",{attrs:{width:"100%",src:t.upload.dialogImageUrl,alt:""}})])],1)],1),t._v(" "),a("el-row",{staticClass:"settings",attrs:{span:20}},[a("el-col",{attrs:{span:3}},[t._v("品牌荣誉")]),t._v(" "),a("el-col",{attrs:{span:20}},[a("el-upload",{attrs:{multiple:!0,action:"http://localhost:8000/graphql?query=mutation%7B%0A%20%20upload%7B%0A%20%20%20%20fieldname%2C%0A%20%20%20%20object%0A%20%20%7D%0A%7D%0A","list-type":"picture-card","on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove,"file-list":t.upload.imgList.brandHonor,"on-change":t.brandHonor}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{size:"tiny"},model:{value:t.upload.imgdialogVisible,callback:function(e){t.upload.imgdialogVisible=e},expression:"upload.imgdialogVisible"}},[a("img",{attrs:{width:"100%",src:t.upload.dialogImageUrl,alt:""}})])],1)],1),t._v(" "),a("el-row",{staticClass:"settings",attrs:{span:20}},[a("el-col",{attrs:{span:3}},[t._v("海外销售图片")]),t._v(" "),a("el-col",{attrs:{span:20}},[a("el-upload",{attrs:{action:"http://localhost:8000/graphql?query=mutation%7B%0A%20%20upload%7B%0A%20%20%20%20fieldname%2C%0A%20%20%20%20object%0A%20%20%7D%0A%7D%0A","list-type":"picture-card","on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove,"file-list":t.upload.imgList.abroad,"on-change":t.abroad}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{size:"tiny"},model:{value:t.upload.imgdialogVisible,callback:function(e){t.upload.imgdialogVisible=e},expression:"upload.imgdialogVisible"}},[a("img",{attrs:{width:"100%",src:t.upload.dialogImageUrl,alt:""}})])],1)],1)],t._v(" "),a("div",{staticClass:"submit"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.createBrand("ruleForm2",t.ruleForm2)}}},[t._v("更新")])],1)],2)},staticRenderFns:[]}}});
//# sourceMappingURL=0.25616e2a13768c4432c5.js.map