webpackJsonp([1],{476:function(t,e,i){i(492);var a=i(0)(i(484),i(496),"data-v-e1280f12",null);t.exports=a.exports},478:function(t,e,i){t.exports={default:i(479),__esModule:!0}},479:function(t,e,i){i(481),t.exports=i(4).Object.values},480:function(t,e,i){var a=i(27),n=i(22),r=i(39).f;t.exports=function(t){return function(e){for(var i,o=n(e),s=a(o),l=s.length,d=0,u=[];l>d;)r.call(o,i=s[d++])&&u.push(t?[i,o[i]]:o[i]);return u}}},481:function(t,e,i){var a=i(13),n=i(480)(!1);a(a.S,"Object",{values:function(t){return n(t)}})},484:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(478),n=i.n(a),r=i(141),o=i.n(r),s=i(14),l=i.n(s);i(2);e.default={data:function(){return{skuForm:{domains:{properties:[{key:""}],unit:""},prdMessage:{prdname:"",prdID:""}},dataObj:"",additional:{shelfLife:"",stockTime:"",transportTime:"",PackTranslate:""},skuImg:{dialogImageUrl:"",fileList:[],imgdialogVisible:!1,imgUrl:[]},id:null}},created:function(){var t=this.$store.updateSku;this.skuForm.prdMessage.prdname=t.product.name,this.id=t.id,this.dataObj=t.additional;var e=t.properties.split(",");this.skuForm.domains.properties=e.reduce(function(t,e){return t.concat({key:e})},[]),this.skuForm.domains.unit=t.unit;var i=JSON.parse(t.additional);this.textLogic(i),this.imgLogic(i)},methods:{updateSku:function(t,e){var i=this,a=this.additionalMsg();a=l()(a),a=a.replace(/"/g,'\\"'),this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;var n=e.domains.properties,r="",o=[];n.forEach(function(t,e){t.key&&(o.push(t.key),r=o.join(","))}),e.domains.properStr=r;var s=e.domains;s.id=i.id,s.additional=a,""===s.properties?i.$message.error("不能为空"):i.$store.dispatch("updateSku",{updateSkuForm:s}).then(window.location.href="#/home/product/products")})},addDomain:function(){this.skuForm.domains.properties.push({key:""})},handlePictureCardPreview:function(t){this.skuImg.dialogImageUrl=t.url,this.skuImg.imgdialogVisible=!0},prdImg:function(t){var e=t.response;e&&(e.fileName="prdImg",this.skuImg.imgUrl.push(e))},additionalMsg:function(){var t=[],e=this.objToArr(this.additional),i=this.formatObj(this.skuImg.imgUrl),a=JSON.parse(this.dataObj).filter(function(t){return"img"===t.type});return i=i.concat(a),t=t.concat(e,i),t},objToArr:function(t){var e=[];for(var i in t){var a={};t[i]=t[i].replace(/\s+/g,""),a[""+i]=t[i],a.type="text",e.push(a)}return e},formatObj:function(t){t.forEach(function(t){t.object=t.data.upload[0]});for(var e=[],i=0;i<t.length;i++)e[i]={},e[i].object=t[i].object,e[i].fileName=t[i].fileName,e[i].type="img";return e},textLogic:function(t){for(var e=t.filter(function(t){return"text"==t.type}),i=e.map(function(t){return o()(t)[0]}),a=e.map(function(t){return n()(t)[0]}),r=0;r<i.length;r++)this.additional[""+i[r]]=a[r]},imgLogic:function(t){var e=this;t.filter(function(t){return"img"==t.type}).forEach(function(t,i){var a=t.object;e.$store.dispatch("urlAuthorization",{uriObject:a}).then(function(t){a.url=t.urlAuthorization.uri,e.skuImg.fileList.push(a)})})}}}},488:function(t,e,i){e=t.exports=i(472)(),e.push([t.i,".back[data-v-e1280f12]{position:fixed;top:70px;float:left}.skuwrap[data-v-e1280f12]{height:100vh;width:80%;margin-bottom:300px}.prdSkuform[data-v-e1280f12]{float:left;width:100%;margin:5px 0}.submit[data-v-e1280f12]{float:right}.el-form-item__content[data-v-e1280f12]{width:100%}.title_des[data-v-e1280f12]{display:inline-block;text-align:center;width:100%}","",{version:3,sources:["/Users/eytan/Desktop/project/hulk-erp-client/src/components/content/updateSku.vue"],names:[],mappings:"AACA,uBACE,eAAgB,AAChB,SAAU,AACV,UAAY,CACb,AACD,0BAEE,aAAc,AACd,UAAW,AAEX,mBAAoB,CACrB,AACD,6BACE,WAAY,AACZ,WAAY,AACZ,YAAa,CACd,AACD,yBACC,WAAa,CACb,AAGD,wCACE,UAAW,CACZ,AACD,4BACE,qBAAsB,AACtB,kBAAmB,AACnB,UAAW,CACZ",file:"updateSku.vue",sourcesContent:["\n.back[data-v-e1280f12]{\n  position: fixed;\n  top: 70px;\n  float: left;\n}\n.skuwrap[data-v-e1280f12]{\n\n  height: 100vh;\n  width: 80%;\n\n  margin-bottom: 300px\n}\n.prdSkuform[data-v-e1280f12]{\n  float: left;\n  width: 100%;\n  margin: 5px 0\n}\n.submit[data-v-e1280f12]{\n float: right;\n}\n.demo-dynamic[data-v-e1280f12]{\n}\n.el-form-item__content[data-v-e1280f12]{\n  width: 100%\n}\n.title_des[data-v-e1280f12]{\n  display: inline-block;\n  text-align: center;\n  width: 100%\n}\n\n"],sourceRoot:""}])},492:function(t,e,i){var a=i(488);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(473)("4a0a21ce",a,!0)},496:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"skuwrap"},[i("div",{staticClass:"tabs"},[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),i("el-breadcrumb-item",[t._v("商品入仓")]),t._v(" "),i("el-breadcrumb-item",[t._v("添加SKU")])],1)],1),t._v(" "),i("el-form",{ref:"skuForm",staticClass:"demo-dynamic",attrs:{model:t.skuForm,"label-width":"100px"}},[i("el-form-item",{attrs:{prop:"prdMessage.prdname",label:"商　　　品"}},[i("el-input",{attrs:{disabled:!0},model:{value:t.skuForm.prdMessage.prdname,callback:function(e){t.skuForm.prdMessage.prdname=e},expression:"skuForm.prdMessage.prdname"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"属　　　性"}},[i("el-form",{attrs:{inline:!0}},[t._l(t.skuForm.domains.properties,function(t){return i("el-form-item",{key:t,attrs:{label:""}},[i("el-input",{staticClass:"prdSkuform",staticStyle:{width:"100%"},attrs:{prop:t.key,placeholder:"属性",required:!0},model:{value:t.key,callback:function(e){t.key=e},expression:"item.key"}})],1)}),t._v(" "),i("el-form-item",[i("el-button",{attrs:{size:"mini"},on:{click:t.addDomain}},[t._v("+")])],1)],2)],1),t._v(" "),i("el-form-item",{attrs:{label:"单　　　位"}},[i("el-input",{staticClass:"prdSkuform",attrs:{prop:t.skuForm.domains.unit,placeholder:"单位"},model:{value:t.skuForm.domains.unit,callback:function(e){t.skuForm.domains.unit=e},expression:"skuForm.domains.unit"}})],1),t._v(" "),[i("el-form",{attrs:{model:t.additional,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"保　质　期"}},[i("el-input",{model:{value:t.additional.shelfLife,callback:function(e){t.additional.shelfLife=e},expression:"additional.shelfLife"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"备货　时长"}},[i("el-input",{model:{value:t.additional.stockTime,callback:function(e){t.additional.stockTime=e},expression:"additional.stockTime"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"运输　时长"}},[i("el-input",{model:{value:t.additional.transportTime,callback:function(e){t.additional.transportTime=e},expression:"additional.transportTime"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"包装　翻译"}},[i("el-input",{model:{value:t.additional.PackTranslate,callback:function(e){t.additional.PackTranslate=e},expression:"additional.PackTranslate"}})],1)],1),t._v(" "),[i("el-row",{staticClass:"settings",attrs:{span:20}},[i("el-col",{attrs:{span:3}},[i("span",{staticClass:"title_des"},[t._v("产品　图片")])]),t._v(" "),i("el-col",{attrs:{span:16}},[i("el-upload",{attrs:{multiple:!0,action:"http://localhost:8000/graphql?query=mutation%7B%0A%20%20upload%7B%0A%20%20%20%20fieldname%2C%0A%20%20%20%20object%0A%20%20%7D%0A%7D%0A","list-type":"picture-card","on-preview":t.handlePictureCardPreview,"file-list":t.skuImg.fileList,"on-change":t.prdImg}},[i("i",{staticClass:"el-icon-plus"})]),t._v(" "),i("el-dialog",{attrs:{size:"tiny"},model:{value:t.skuImg.imgdialogVisible,callback:function(e){t.skuImg.imgdialogVisible=e},expression:"skuImg.imgdialogVisible"}},[i("img",{attrs:{width:"100%",src:t.skuImg.dialogImageUrl,alt:""}})])],1)],1),t._v(" "),i("el-button",{staticClass:"submit",attrs:{type:"primary",disabled:!1},on:{click:function(e){t.updateSku("skuForm",t.skuForm)}}},[t._v("保存")])]]],2)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=1.ec4c6365a0ee63fea891.js.map